# Документация по сервисам (Services)

Этот документ описывает сервисные классы, отвечающие за управление различными системами города.

## Глава 1: UtilityService.cs

`UtilityService` — сервис управления коммунальными услугами (ЖКХ). Отвечает за подключение зданий к сетям и управление состоянием сетей.

### Свойства

- **`ServiceType`**: `UtilityType` - Тип коммунальной услуги (Electricity, Water, Gas, Sewage)
- **`ConnectedBuildings`**: `List<Building>` - Список зданий, подключенных к этой сети
- **`IsNetworkOperational`**: `bool` - Работает ли сеть (true - работает, false - авария/отключение)

### Методы

- **`ConnectBuilding(Building building)`**: `void`
  - Подключает здание к сети. Обновляет соответствующее свойство здания (HasElectricity, HasWater и т.д.)
- **`DisconnectBuilding(Building building)`**: `void`
  - Отключает здание от сети. Сбрасывает соответствующее свойство здания
- **`SetNetworkState(bool isOperational)`**: `void`
  - Включает или выключает всю сеть. При отключении сети все подключенные здания теряют соответствующую коммунальную услугу
- **`GetConnectedBuildingsCount()`**: `int`
  - Возвращает количество подключенных зданий для статистики

## Глава 2: UtilityManager.cs

`UtilityManager` — менеджер для централизованного управления всеми коммунальными услугами города.

### Свойства

- **`UtilityServices`**: `Dictionary<UtilityType, UtilityService>` - Коллекция всех сервисов ЖКХ

### Методы

- **`ConnectBuildingToAllUtilities(Building building)`**: `void`
  - Подключает здание ко всем коммунальным услугам одновременно
- **`DisconnectBuildingFromAllUtilities(Building building)`**: `void`
  - Отключает здание от всех коммунальных услуг одновременно
- **`GetUtilityStatistics()`**: `void`
  - Собирает статистику по всем подключенным зданим (может быть расширен для возврата данных)

## Глава 3: ParkManager.cs

`ParkManager` — менеджер для управления парками и пешеходной инфраструктурой города.

### Методы

- **`CreatePark(GameMap map, int startX, int startY, int width, int height)`**: `void`
  - Создает парк на указанной территории. Устанавливает флаги `HasPark` и `HasPedestrianPath` на всех тайлах в указанной области
- **`CreateBikeLane(GameMap map, int startX, int startY, int length, bool isHorizontal)`**: `void`
  - Создает велодорожку. Устанавливает флаги `HasBikeLane` и `HasPedestrianPath` на тайлах вдоль маршрута
- **`GetHappyTilesCount(GameMap map)`**: `int`
  - Возвращает количество "счастливых" тайлов (с парками или велодорожками) на карте

## Глава 4: MapGeneratorService.cs

`MapGeneratorService` — сервис для генерации игровой карты. (Существующий сервис)

### Методы

- **`GenerateMap(int width, int height)`**: `GameMap`
  - Генерирует новую игровую карту указанного размера

## Глава 5: Взаимодействие систем

### Интеграция ЖКХ с другими модулями

- **Производственные здания**: Требуют электричество для работы оборудования
- **Жилые здания**: Требуют все коммунальные услуги для комфортного проживания
- **Общественные здания**: Требуют коммунальные услуги для предоставления услуг

### Интеграция пешеходной инфраструктуры

- **Система счастья**: Парки и велодорожки увеличивают счастье жителей
- **Перемещение**: Пешеходные дорожки улучшают маршруты перемещения
- **Экология**: Зеленые зоны положительно влияют на экологию города

---