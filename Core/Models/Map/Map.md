# Документация по моделям карты (Map Models)

Этот документ описывает классы, связанные с игровой картой, включая саму карту, ее ячейки (тайлы) и природные ресурсы.

## Глава 1: GameMap.cs

`GameMap` — это основной класс, представляющий игровую карту. Он управляет сеткой тайлов и всеми зданиями, размещенными на ней.

### Свойства

- **`Width`**, **`Height`**: `int` (только для чтения)
  - Ширина и высота карты в тайлах.
- **`Tiles`**: `Tile[,]`
  - Двумерный массив, представляющий сетку тайлов карты.
- **`Buildings`**: `List<Building>`
  - Список всех зданий, размещенных на карте.
- **`_buildingsGrid`**: `Building[,]`
  - Приватная сетка для быстрого доступа к зданию по координатам.

### Методы

- **`InitializeMap()`**: `private void`
  - Инициализирует карту, создавая объекты `Tile` для каждой ячейки сетки.
- **`TryPlaceBuilding(Building building, int x, int y)`**: `bool`
  - Пытается разместить здание на карте, вызывая метод `TryPlace` самого здания.
- **`GetBuildingAt(int x, int y)`**: `Building`
  - Возвращает здание, расположенное на указанных координатах, или `null`, если тайл пуст.
- **`SetBuildingAt(int x, int y, Building building)`**: `void`
  - Устанавливает ссылку на здание на указанных координатах в сетке `_buildingsGrid` и в самом тайле.

## Глава 2: NaturalResource.cs

`NaturalResource` представляет собой месторождение природного ресурса на карте.

### Свойства

- **`Type`**: `ResourceType`
  - Тип ресурса (например, `Iron`, `Oil`).
- **`Amount`**: `int`
  - Количество ресурса, оставшееся в месторождении.

## Глава 3: Tile.cs

`Tile` представляет собой одну ячейку (клетку) на игровой карте.

### Свойства

- **`X`**, **`Y`**: `int`
  - Координаты тайла на карте.
- **`Terrain`**: `TerrainType`
  - Тип ландшафта (например, `Water`, `Plain`).
- **`Height`**: `float`
  - Высота ландшафта в данной точке.
- **`Resources`**: `List<NaturalResource>`
  - Список природных ресурсов, доступных на этом тайле.
- **`Building`**: `Building`
  - Ссылка на здание, которое занимает этот тайл. `null`, если тайл пуст.
- **`HasRoad`**: `bool`
  - Флаг, указывающий, есть ли на тайле дорога.

### Свойства пешеходной инфраструктуры

- **`HasBikeLane`**: `bool`
  - Флаг, указывающий, есть ли на тайле велодорожка. Увеличивает счастье жителей при перемещении по таким тайлам.
- **`HasPark`**: `bool`
  - Флаг, указывающий, есть ли на тайле парк или зелёная зона. Значительно увеличивает счастье жителей.
- **`HasPedestrianPath`**: `bool`
  - Флаг, указывающий, есть ли на тайле пешеходная дорожка. Увеличивает счастье жителей при перемещении.

**Примечание:** Пешеходная инфраструктура влияет на уровень счастья жителей (`Citizen.Happiness`) при их перемещении по карте. Парки оказывают наибольшее положительное влияние, затем велодорожки и пешеходные дорожки.

## Глава 4: Взаимодействие систем

### Влияние пешеходной инфраструктуры на жителей

При перемещении жителей по карте система автоматически проверяет наличие пешеходной инфраструктуры на текущем тайле и обновляет уровень счастья:

- **Парк** (`HasPark = true`): +0.1 к счастью
- **Велодорожка** (`HasBikeLane = true`): +0.05 к счастью  
- **Пешеходная дорожка** (`HasPedestrianPath = true`): +0.03 к счастью

### Совместимость с другими объектами

Пешеходная инфраструктура может сосуществовать с:
- Дорогами (`HasRoad = true`)
- Некоторыми типами зданий (парковые павильоны, кафе)
- Природными ресурсами

Ограничения:
- Не может размещаться на водных тайлах (`TerrainType.Water`)
- Не может размещаться на горных тайлах (`TerrainType.Mountain`)

---
